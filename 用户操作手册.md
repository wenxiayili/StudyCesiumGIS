# StudyCesium 用户操作手册

## 目录

- [1. 应用简介](#1-应用简介)
- [2. 快速开始](#2-快速开始)
- [3. 主界面介绍](#3-主界面介绍)
- [4. 核心功能详解](#4-核心功能详解)
  - [4.1 教程系统](#41-教程系统)
  - [4.2 坐标转换工具](#42-坐标转换工具)
  - [4.3 参数调试器](#43-参数调试器)
  - [4.4 场景管理器](#44-场景管理器)
  - [4.5 截图工具](#45-截图工具)
  - [4.6 GIF 录制器](#46-gif-录制器)
  - [4.7 性能监控](#47-性能监控)
  - [4.8 代码片段管理](#48-代码片段管理)
  - [4.9 3D Tiles 调试器](#49-3d-tiles-调试器)
  - [4.10 CSV 数据导入](#410-csv-数据导入)
  - [4.11 CZML 时间线编辑器](#411-czml-时间线编辑器)
  - [4.12 Cesium API 浏览器](#412-cesium-api-浏览器)
- [5. 快捷键参考](#5-快捷键参考)
- [6. 常见问题](#6-常见问题)
- [7. 技巧与最佳实践](#7-技巧与最佳实践)
- [8. 故障排除](#8-故障排除)

---

## 1. 应用简介

**StudyCesium** 是一个基于 Electron 和 Cesium 的现代化 3D GIS 桌面应用程序，专为 Cesium 开发者和学习者设计。它集成了代码编辑、实时预览、调试工具和教程系统，让您能够高效地学习和开发 Cesium 3D 地球应用。

### 主要特性

- **集成开发环境**: 内置代码编辑器，支持实时预览和执行
- **交互式教程**: 从入门到进阶的完整教程体系
- **可视化调试**: 实时调整参数并即时查看效果
- **场景管理**: 完整的实体管理和场景组织功能
- **性能优化**: 内置性能监控和优化建议
- **多种工具**: 截图、录制、坐标转换、数据导入等
<!-- - **跨平台**: 支持 Windows、macOS 和 Linux -->

### 技术规格

- **Cesium 版本**: 1.133.1
- **支持的实体类型**: Point, Label, Billboard, Polyline, Polygon, Box, Cylinder, Ellipse, Rectangle, Corridor, Wall, Model, Path（13种）
- **坐标系统**: 经纬度、弧度、笛卡尔坐标、屏幕坐标、Web Mercator

---

## 2. 快速开始

### 2.1 安装应用

#### Windows
1. 下载安装包（`.exe` 文件）
2. 双击运行安装程序
3. 按照向导完成安装
4. 从开始菜单或桌面快捷方式启动应用

#### macOS
1. 下载 `.dmg` 文件
2. 打开 DMG 文件，将应用拖拽到"应用程序"文件夹
3. 从启动台或应用程序文件夹打开 StudyCesium

#### Linux
1. 下载 `.deb` 或 `.rpm` 安装包
2. 使用包管理器安装：
   ```bash
   # Debian/Ubuntu
   sudo dpkg -i studycesium_1.0.0_amd64.deb

   # RedHat/CentOS
   sudo rpm -i studycesium-1.0.0.x86_64.rpm
   ```
3. 从应用菜单启动

### 2.2 首次配置

#### 配置 Cesium Ion Token

应用首次启动时会使用默认的测试 Token。为了获得完整功能，建议配置您自己的 Token：

1. 访问 [Cesium Ion](https://ion.cesium.com/tokens) 获取 Token
2. 在应用菜单栏选择：**设置** → **Cesium Token 配置**
3. 在弹出的对话框中输入您的 Token
4. 点击"保存"

Token 将被安全保存到本地配置文件中，重启应用后自动加载。

### 2.3 界面概览

应用启动后，您将看到：

- **左侧**: 代码编辑器区域（使用 Monaco Editor）
- **右侧**: Cesium 3D 地球视图
- **顶部**: 工具栏（各种工具按钮）
- **底部**: 控制台输出区域

---

## 3. 主界面介绍

### 3.1 代码编辑器

**位置**: 左侧面板

**功能**:
- 代码编写和编辑（支持 JavaScript）
- 语法高亮和智能提示
- 代码折叠和格式化
- 多标签管理（支持同时打开多个代码文件）

**基本操作**:
- **运行代码**: 点击"运行"按钮或按 `Ctrl+Enter`
- **清空代码**: 点击"清空"按钮
- **保存代码**: 代码会自动保存到浏览器本地存储

### 3.2 地球视图

**位置**: 右侧面板

**功能**:
- 实时 3D 地球渲染
- 代码执行结果的可视化展示
- 支持鼠标交互（旋转、缩放、平移）

**基本操作**:
- **旋转地球**: 左键拖拽
- **缩放**: 鼠标滚轮
- **平移**: 中键拖拽或 Ctrl + 左键拖拽
- **倾斜视角**: 右键拖拽

### 3.3 工具栏

**位置**: 顶部

包含所有主要功能的快捷按钮：
- 教程管理
- 参数调试
- 场景管理
- 坐标转换
- 截图工具
- GIF 录制
- 性能监控
- 代码片段
- API 浏览器
- 更多工具...

---

## 4. 核心功能详解

### 4.1 教程系统

教程系统提供从入门到进阶的完整学习路径，适合 Cesium 初学者和进阶开发者。

#### 4.1.1 教程管理器

**打开方式**: 点击工具栏的"教程"按钮

**功能特性**:
- **分类浏览**: 教程按类别组织，包括：
  - 新手入门
  - 坐标系统
  - 实体图形
  - 相机控制
  - 交互事件
  - 动画与时间
  - 数据源管理

- **进度跟踪**: 自动记录学习进度，显示已完成的步骤数和百分比
- **难度标识**: 每个教程标注难度等级（易/中/难）
- **时长预估**: 显示每个教程的预计完成时间

**使用步骤**:
1. 打开教程管理器
2. 选择感兴趣的类别
3. 点击教程卡片开始学习
4. 教程面板将自动打开

#### 4.1.2 教程步骤面板

**功能**: 逐步引导您完成教程

**界面布局**:
```
┌─────────────────────────────────────┐
│ 步骤 1/5: 创建第一个点实体          │
├─────────────────────────────────────┤
│ 学习目标:                            │
│ • 理解实体(Entity)概念               │
│ • 学会创建点实体                     │
├─────────────────────────────────────┤
│ 详细说明:                            │
│ [教程正文内容...]                    │
├─────────────────────────────────────┤
│ 任务:                                │
│ [具体操作要求...]                    │
├─────────────────────────────────────┤
│ 💡 提示 (可展开)                     │
│ 📝 参考答案 (可展开)                 │
├─────────────────────────────────────┤
│ [上一步] [标记完成] [下一步]         │
└─────────────────────────────────────┘
```

**操作指南**:

1. **查看学习目标**: 了解本步骤要学什么
2. **阅读说明**: 仔细阅读详细说明
3. **完成任务**: 按照任务要求编写代码
4. **查看提示**: 如遇困难，点击"提示"查看帮助（提示分为多个层级）
5. **参考答案**: 如需完整代码，点击"参考答案"
6. **加载代码**: 点击"加载起始代码"或"加载参考答案"到编辑器
7. **标记完成**: 完成后点击"标记完成"，进度会自动保存
8. **继续学习**: 点击"下一步"进入下一个步骤

**学习技巧**:
- 尽量自己完成任务，只在必要时查看提示
- 先尝试运行起始代码，理解现有的代码结构
- 完成任务后，对比参考答案，学习最佳实践
- 可以修改参考答案，尝试不同的参数效果

---

### 4.2 坐标转换工具

坐标转换工具支持在多种坐标系统之间进行转换，并在地球上可视化标记转换结果。

**打开方式**: 点击工具栏的"坐标转换"按钮

#### 4.2.1 支持的坐标系统

1. **经纬度（度）**
   - 格式: `经度, 纬度, 高度`
   - 示例: `116.397128, 39.916527, 100`（北京）

2. **弧度**
   - 格式: `经度(rad), 纬度(rad), 高度`
   - 示例: `2.0313, 0.6964, 100`

3. **笛卡尔坐标 (Cartesian3)**
   - 格式: `x, y, z`
   - 示例: `-2175690.3, 4386653.2, 4077985.6`

4. **屏幕坐标 (Cartesian2)**
   - 格式: `x, y`
   - 相对于地球视图的像素坐标

5. **Web Mercator 投影**
   - 格式: `x, y`
   - 常用于网络地图服务

#### 4.2.2 使用步骤

**方法一：手动输入坐标**

1. 选择输入坐标系统（如"经纬度"）
2. 输入坐标值（如 `116.4, 39.9, 0`）
3. 点击"转换"按钮
4. 查看所有格式的转换结果

**方法二：使用预设地点**

1. 点击"预设"下拉菜单
2. 选择预定义的地点（如"北京"、"上海"等）
3. 坐标自动填充并转换

**方法三：从地图选点**

1. 启用"从地图选点"模式
2. 在地球视图上点击任意位置
3. 该位置的坐标自动转换

#### 4.2.3 可视化功能

- **标记位置**: 勾选"在地图上标记"，转换后的位置会在地球上显示标记点
- **自动飞行**: 勾选"自动飞至位置"，相机会自动飞到标记点

#### 4.2.4 代码生成

点击"生成代码"按钮，自动生成坐标转换的 Cesium 代码：

```javascript
// 示例生成的代码
const position = Cesium.Cartesian3.fromDegrees(
  116.397128, // 经度
  39.916527,  // 纬度
  100         // 高度
);
viewer.entities.add({
  position: position,
  point: {
    pixelSize: 10,
    color: Cesium.Color.RED
  }
});
```

**操作**:
- 点击"复制代码"：复制到系统剪贴板
- 点击"加载到编辑器"：直接插入到代码编辑器

---

### 4.3 参数调试器

参数调试器是最强大的工具之一，允许您实时调整 Cesium 实体的参数，并立即看到视觉效果。

**打开方式**: 点击工具栏的"参数调试"按钮

#### 4.3.1 支持的实体类型

共支持 12 种实体类型：
- Point（点）
- Label（文字标签）
- Billboard（图标）
- Polyline（折线）
- Polygon（多边形）
- Box（立方体）
- Cylinder（圆柱体）
- Ellipse（椭圆）
- Rectangle（矩形）
- Corridor（走廊/道路）
- Wall（墙）
- Model（3D 模型）

#### 4.3.2 使用流程

**快速创建实体**

1. 点击顶部的实体类型按钮（如"创建 Point"）
2. 实体立即在地球上创建（使用默认参数）
3. 参数面板自动显示该实体的所有可调参数

**调整参数**

参数分为 5 大类（可折叠）：

1. **位置参数**
   - 经度 (Longitude)
   - 纬度 (Latitude)
   - 高度 (Height)
   - 提供滑块和数字输入框

2. **外观参数**
   - 颜色（支持颜色选择器）
   - 透明度（0-1）
   - 尺寸/大小
   - 轮廓颜色
   - 轮廓宽度

3. **文本参数**（仅 Label 类型）
   - 文本内容
   - 字体大小
   - 字体样式
   - 填充颜色
   - 背景颜色
   - 偏移量

4. **材质参数**（仅 Polygon、Ellipse 等）
   - 填充材质
   - 材质颜色
   - 纹理
   - 透明度

5. **高级选项**
   - 高度参考（地面/相对/绝对）
   - 显示/隐藏
   - 其他特定属性

**实时预览**

- 调整任何参数后，地球视图中的实体立即更新
- 无需点击"应用"或"确认"按钮
- 支持拖拽滑块实时查看效果

#### 4.3.3 参数预设功能

**保存预设**

1. 调整参数到满意的效果
2. 点击"保存预设"按钮
3. 输入预设名称和描述
4. 点击"确认"

预设将保存到本地，下次打开应用仍然可用。

**加载预设**

1. 点击"预设"下拉菜单
2. 选择之前保存的预设
3. 参数立即应用到当前实体

**删除预设**

1. 在预设列表中找到要删除的预设
2. 点击删除图标（垃圾桶）

#### 4.3.4 代码生成

**实时代码生成**

参数调整的同时，底部的代码面板会实时生成对应的 Cesium 代码：

```javascript
// 示例生成的 Point 代码
viewer.entities.add({
  name: 'My Point',
  position: Cesium.Cartesian3.fromDegrees(116.4, 39.9, 0),
  point: {
    pixelSize: 10,
    color: Cesium.Color.RED,
    outlineColor: Cesium.Color.WHITE,
    outlineWidth: 2
  }
});
```

**代码操作**

- **复制代码**: 复制到系统剪贴板
- **加载到编辑器**: 插入到代码编辑器
- **重置参数**: 恢复到默认值

#### 4.3.5 高级技巧

**批量调试**

1. 创建多个相同类型的实体
2. 使用参数调试器快速找到最佳参数组合
3. 保存为预设供后续使用

**学习最佳实践**

1. 加载不同的预设查看代码
2. 对比不同参数的视觉效果
3. 理解各参数的作用和取值范围

---

### 4.4 场景管理器

场景管理器提供对地球场景中所有实体的统一管理。

**打开方式**: 点击工具栏的"场景管理"按钮

#### 4.4.1 界面布局

```
┌─────────────────────────────────────┐
│ 场景管理器                           │
├─────────────────────────────────────┤
│ [搜索框] [类型筛选] [可见性筛选]     │
│ [刷新] [全选] [批量显示] [批量删除]  │
├─────────────────────────────────────┤
│ 统计: 总计 50 | 可见 45 | 隐藏 5     │
├─────────────────────────────────────┤
│ ☑ 📍 Point-1     [👁] [📍] [🗑]     │
│ ☑ 📊 Polygon-2   [👁] [📍] [🗑]     │
│ ☐ 📏 Polyline-3  [👁] [📍] [🗑]     │
│ ...                                  │
├─────────────────────────────────────┤
│ [导出场景]                           │
└─────────────────────────────────────┘
```

#### 4.4.2 主要功能

**实体列表**

- 显示场景中所有实体
- 每个实体显示：
  - 类型图标
  - 名称/ID
  - 可见性状态

**搜索与筛选**

1. **按名称搜索**
   - 在搜索框输入关键词
   - 实时过滤匹配的实体

2. **按类型筛选**
   - 下拉选择实体类型（Point、Polygon等）
   - 仅显示选定类型的实体

3. **按可见性筛选**
   - 全部 / 仅可见 / 仅隐藏

4. **排序**
   - 按名称
   - 按类型
   - 按创建时间
   - 按 ID

**单体操作**

对每个实体可以执行：

- **切换可见性**: 点击眼睛图标 👁
  - 显示 → 隐藏
  - 隐藏 → 显示

- **飞至实体**: 点击定位图标 📍
  - 相机自动飞到该实体位置

- **删除实体**: 点击删除图标 🗑
  - 从场景中移除该实体

**批量操作**

1. **全选/取消全选**
   - 点击顶部全选复选框

2. **选择多个实体**
   - 勾选实体前的复选框
   - 已选中数量显示在状态栏

3. **批量显示/隐藏**
   - 选中实体后点击"批量显示"或"批量隐藏"

4. **批量删除**
   - 选中实体后点击"批量删除"
   - 确认后删除所有选中的实体

**统计信息**

实时显示：
- 总实体数
- 可见实体数
- 隐藏实体数
- 按类型统计（Point: 10, Polygon: 5 等）

#### 4.4.3 场景导出

**导出为 JSON**

1. 点击"导出场景"按钮
2. 选择保存位置和文件名
3. 场景快照导出为 JSON 格式

**JSON 格式**

```json
{
  "metadata": {
    "exportDate": "2025-01-15T10:30:00Z",
    "version": "1.0.0",
    "entityCount": 50
  },
  "entities": [
    {
      "id": "entity-1",
      "type": "Point",
      "name": "My Point",
      "show": true,
      "position": {...},
      "properties": {...}
    },
    ...
  ]
}
```

**导入场景**（需要通过代码）

```javascript
// 读取导出的 JSON 文件
const sceneData = ...; // 加载 JSON
sceneData.entities.forEach(entityData => {
  viewer.entities.add(entityData);
});
```

---

### 4.5 截图工具

截图工具用于捕获 Cesium 场景的静态图像。

**打开方式**: 点击工具栏的"截图"按钮

#### 4.5.1 截图模式

**全屏截图**

1. 点击"全屏截图"按钮
2. 整个地球视图被捕获
3. 预览窗口自动弹出

**区域截图**

1. 点击"区域截图"按钮
2. 鼠标变为十字光标
3. 按住左键拖拽选择区域
   - 实时显示区域尺寸（宽 x 高）
   - 非选中区域显示半透明遮罩
4. 松开鼠标完成截图
5. 按 ESC 键取消截图

#### 4.5.2 截图设置

**图片格式**

- PNG（推荐，无损）
- JPEG（体积更小）

**图片质量**（仅 JPEG）

- 拖动滑块调整质量（1-100）
- 建议值：80-90

**分辨率**

- 使用当前视图分辨率
- 或自定义宽度和高度

#### 4.5.3 截图操作

**预览**

- 截图完成后自动显示预览
- 可查看图片尺寸、格式、文件大小

**下载**

1. 点击"下载"按钮
2. 选择保存位置
3. 文件名自动生成（含时间戳）
   - 格式: `cesium-screenshot-20250115-103045.png`

**复制到剪贴板**

1. 点击"复制"按钮
2. 图片复制到系统剪贴板
3. 可粘贴到其他应用（如 Word、PowerPoint、聊天工具）

**重新截图**

- 点击"重新截图"返回截图模式

#### 4.5.4 使用技巧

**获取高质量截图**

1. 先调整相机到最佳角度
2. 隐藏不需要的实体（通过场景管理器）
3. 关闭调试信息（如帧率显示）
4. 使用全屏截图或高分辨率设置

**创建演示素材**

1. 使用区域截图截取关键部分
2. 使用 PNG 格式保持清晰度
3. 连续截取多个场景制作幻灯片

---

### 4.6 GIF 录制器

GIF 录制器用于录制 Cesium 场景的动画，生成 GIF 动图。

**打开方式**: 点击工具栏的"GIF 录制"按钮

#### 4.6.1 录制设置

**帧率 (FPS)**

- 范围: 1-30 FPS
- 推荐值:
  - 10 FPS: 流畅且文件较小
  - 15 FPS: 平滑动画
  - 30 FPS: 最流畅，但文件较大

**质量**

- 范围: 1-20
- 推荐值:
  - 10: 标准质量，文件较小
  - 15: 高质量
  - 20: 最佳质量，文件最大

**分辨率**

- 宽度: 自定义（如 800）
- 高度: 自定义（如 600）
- 建议保持比例与地球视图一致

**最大时长**

- 范围: 5-120 秒
- 推荐: 10-30 秒（避免文件过大）

#### 4.6.2 录制流程

1. **调整设置**
   - 设置帧率、质量、分辨率
   - 设置最大时长

2. **准备场景**
   - 将相机调整到起始位置
   - 确保要录制的内容在视野内

3. **开始录制**
   - 点击"开始录制"按钮
   - 录制控制面板出现
   - 开始时间计数

4. **执行动画**
   - 手动旋转地球
   - 运行动画代码
   - 改变实体状态
   - 或任何您想录制的操作

5. **控制录制**
   - **暂停**: 点击"暂停"按钮（可继续）
   - **继续**: 点击"继续"按钮
   - **停止**: 点击"停止"按钮

6. **生成 GIF**
   - 停止录制后，开始生成 GIF
   - 显示生成进度（百分比）
   - 生成完成后自动下载

#### 4.6.3 录制窗口

**可拖拽窗口**

- 录制控制面板默认显示在右上角
- 鼠标拖拽标题栏可移动位置
- 避免遮挡录制内容

**显示信息**

- 录制时长（MM:SS 格式）
- 当前帧数
- 录制状态（录制中/已暂停/生成中）

#### 4.6.4 GIF 输出

**文件命名**

- 自动生成文件名，含时间戳
- 格式: `cesium-recording-20250115-103045.gif`

**文件大小**

取决于：
- 录制时长
- 帧率
- 质量设置
- 分辨率
- 场景复杂度

**优化建议**

- 降低帧率（10 FPS 通常足够）
- 减小分辨率
- 缩短录制时长
- 降低质量设置（但不低于 10）

#### 4.6.5 依赖说明

GIF 录制器依赖 `gif.js` 库。如果该库未安装：

- 应用会显示提示信息
- 使用降级方案：保存为图片序列（多张 PNG）
- 您可以使用第三方工具将图片序列合成 GIF

#### 4.6.6 使用场景

**教程演示**

- 录制操作步骤
- 展示动画效果
- 制作教学资料

**成果展示**

- 展示项目效果
- 制作演示动图
- 分享到社交媒体

**bug 报告**

- 录制问题场景
- 帮助开发者重现 bug

---

### 4.7 性能监控

性能监控工具实时监控应用性能，并提供优化建议。

**打开方式**: 点击工具栏的"性能监控"按钮

#### 4.7.1 监控指标

**帧率 (FPS)**

- **实时 FPS**: 当前帧率
- **帧时间**: 每帧耗时（毫秒）
- **FPS 趋势**:
  - ↗ 上升
  - → 稳定
  - ↘ 下降
- **历史图表**: 显示最近 60 帧的 FPS 曲线

**内存使用**（需浏览器支持 Performance API）

- **已用内存**: 当前内存占用（MB）
- **内存限制**: 浏览器分配的内存上限（MB）
- **使用百分比**: 已用/总量
- **进度条**: 可视化显示
- **警告提示**:
  - 黄色: 超过 70%
  - 红色: 超过 90%

**Cesium 渲染统计**

- **实体数量**: 场景中的实体总数
- **图元数量**: 渲染的图元（Primitives）数量
- **绘制命令**: 每帧的绘制调用次数
- **数据源**: DataSource 数量

#### 4.7.2 性能等级

应用根据 FPS 自动评定性能等级：

| 等级 | FPS 范围 | 颜色 | 说明 |
|------|---------|------|------|
| 优秀 | ≥ 55 | 绿色 | 性能优秀，流畅运行 |
| 良好 | 40-54 | 蓝色 | 性能良好，基本流畅 |
| 一般 | 25-39 | 黄色 | 性能一般，可能卡顿 |
| 较差 | < 25 | 红色 | 性能较差，严重卡顿 |

#### 4.7.3 性能建议系统

应用会自动分析性能数据，生成针对性的优化建议。

**建议类型**

- **错误级**: 红色，严重性能问题
- **警告级**: 黄色，潜在性能问题
- **信息级**: 蓝色，优化提示

**常见建议示例**

**FPS 低于 30**
```
🔴 错误: 帧率过低（当前 25 FPS）
建议:
• 减少场景中的实体数量
• 降低图形质量设置
• 关闭不必要的特效（如阴影、光照）
• 检查是否有无限循环的代码
```

**FPS 低于 45**
```
🟡 警告: 帧率偏低（当前 42 FPS）
建议:
• 优化实体数量，使用 EntityCluster（聚合）
• 考虑使用 Billboard Collection 替代大量 Entity
• 减少透明度叠加
```

**内存超过 90%**
```
🔴 错误: 内存使用率过高（92%）
建议:
• 清理不需要的实体（通过场景管理器）
• 检查是否有内存泄漏
• 移除未使用的数据源
• 限制历史数据的保留时长
```

**内存超过 70%**
```
🟡 警告: 内存使用率偏高（75%）
建议:
• 定期清理旧实体
• 避免创建过多临时对象
• 考虑使用对象池
```

**实体数量过多**
```
🟡 警告: 实体数量过多（当前 10,500）
建议:
• 使用 EntityCluster 进行聚合显示
• 使用 DataSource 管理大量数据
• 考虑按需加载（LOD）
• 隐藏视野外的实体
```

**图元数量过多**
```
🟡 警告: 图元数量过多（当前 1,200）
建议:
• 合并几何体减少绘制调用
• 使用实例化渲染（Instancing）
• 减少材质种类
```

#### 4.7.4 使用建议

**持续监控**

- 开发过程中保持性能监控面板开启
- 关注 FPS 趋势，及时发现性能下降

**性能测试**

1. 运行代码前记录基准 FPS
2. 运行代码后观察 FPS 变化
3. 根据建议优化代码
4. 重新测试验证优化效果

**优化优先级**

1. 先解决"错误级"问题（FPS < 30，内存 > 90%）
2. 再处理"警告级"问题
3. 最后考虑"信息级"优化建议

---

### 4.8 代码片段管理

代码片段管理器用于保存、组织和复用常用的代码片段。

**打开方式**: 点击工具栏的"代码片段"按钮

#### 4.8.1 功能概览

- 保存当前编辑器中的代码为片段
- 为片段添加名称和描述
- 快速加载片段到编辑器
- 导出/导入片段库
- 本地持久化存储

#### 4.8.2 使用流程

**保存片段**

1. 在代码编辑器中编写代码
2. 打开代码片段管理器
3. 点击"保存当前代码"按钮
4. 填写片段信息：
   - 片段名称（必填）：如"创建点实体"
   - 片段描述（可选）：如"创建一个红色的点实体"
5. 点击"确认"保存
6. 片段自动保存到本地存储

**加载片段**

1. 打开代码片段管理器
2. 浏览片段列表
3. 点击片段卡片
4. 代码自动加载到编辑器

**删除片段**

1. 找到要删除的片段
2. 点击删除图标（垃圾桶）
3. 确认删除

#### 4.8.3 片段管理

**片段卡片显示**

```
┌────────────────────────────┐
│ 创建点实体                  │
├────────────────────────────┤
│ 创建一个红色的点实体         │
├────────────────────────────┤
│ 📅 2025-01-15 10:30        │
│                     [🗑]   │
└────────────────────────────┘
```

每个片段显示：
- 片段名称
- 片段描述
- 创建时间
- 删除按钮

**片段搜索**（如果片段较多）

- 在搜索框输入关键词
- 过滤匹配名称或描述的片段

#### 4.8.4 导入/导出

**导出片段库**

1. 点击"导出片段"按钮
2. 选择保存位置
3. 所有片段导出为 JSON 文件

**JSON 格式**

```json
{
  "snippets": [
    {
      "id": "snippet-1",
      "name": "创建点实体",
      "description": "创建一个红色的点实体",
      "code": "viewer.entities.add({...});",
      "createdAt": "2025-01-15T10:30:00Z"
    },
    ...
  ]
}
```

**导入片段库**

1. 点击"导入片段"按钮
2. 选择之前导出的 JSON 文件
3. 片段自动加载到片段库

**合并策略**

- 导入时不会覆盖现有片段
- 相同名称的片段会重命名（添加后缀）

#### 4.8.5 使用技巧

**组织片段**

建议的命名规范：
- 使用描述性名称（如"创建点实体"而非"代码1"）
- 添加类别前缀（如"[实体] 创建点"、"[相机] 飞行动画"）
- 添加详细描述，方便日后查找

**常用片段示例**

```
1. [实体] 创建点
   描述: 创建基本的点实体

2. [实体] 创建 Billboard
   描述: 创建图标实体，带自定义图片

3. [相机] 飞行到指定位置
   描述: 相机平滑飞行动画

4. [数据] 加载 GeoJSON
   描述: 从 URL 加载 GeoJSON 数据

5. [事件] 点击实体事件
   描述: 监听实体点击事件
```

**备份片段库**

- 定期导出片段库进行备份
- 可在不同设备间同步片段

---

### 4.9 3D Tiles 调试器

3D Tiles 调试器用于加载和调试 3D Tiles 数据集。

**打开方式**: 点击工具栏的"3D Tiles 调试"按钮

#### 4.9.1 加载 3D Tiles

**方法一：从 URL 加载**

1. 选择"从 URL 加载"选项
2. 输入 tileset.json 的完整 URL
   - 示例: `https://example.com/tileset.json`
3. 点击"加载"按钮
4. 等待加载完成

**方法二：从 Cesium Ion 加载**

1. 选择"从 Cesium Ion 加载"选项
2. 输入 Asset ID
   - 示例: `96188` （Cesium OSM Buildings）
3. （可选）输入 Access Token（如使用自定义资源）
4. 点击"加载"按钮

#### 4.9.2 调试可视化

加载成功后，可启用各种调试可视化选项：

**显示包围盒**

- 勾选"显示包围盒"
- 每个瓦片的包围盒以线框显示
- 有助于理解瓦片的空间划分

**按 LOD 着色**

- 勾选"按 LOD 着色"
- 不同细节层级的瓦片显示不同颜色
- 快速识别瓦片的层级结构

**显示几何误差**

- 勾选"显示几何误差"
- 显示每个瓦片的几何误差值
- 帮助理解 LOD 切换逻辑

**显示内容包围盒**

- 勾选"显示内容包围盒"
- 显示瓦片内容的实际包围盒
- 区别于瓦片的几何包围盒

**显示请求量**

- 勾选"显示请求量"
- 实时显示正在请求的瓦片数量
- 监控网络加载性能

#### 4.9.3 性能选项

**屏幕空间误差阈值**

- 参数: `maximumScreenSpaceError`
- 范围: 1-32（默认 16）
- 说明:
  - 值越小，加载更高精度的瓦片，画质更好但性能更低
  - 值越大，加载较低精度的瓦片，性能更好但画质降低
- 推荐值:
  - 8: 高画质
  - 16: 平衡（默认）
  - 32: 高性能

**LOD 跳跃**

- 参数: `skipLevelOfDetail`
- 选项: 启用/禁用
- 说明:
  - 启用后，允许跳过某些 LOD 层级
  - 可提高加载速度，但可能出现瓦片跳变

**动态屏幕空间误差**

- 参数: `dynamicScreenSpaceError`
- 选项: 启用/禁用
- 说明:
  - 根据相机移动速度动态调整误差阈值
  - 移动快时降低质量，静止时提高质量

**最大内存使用**

- 参数: `cacheBytes`
- 范围: 128 MB - 2048 MB
- 说明: 限制瓦片数据的最大缓存大小

#### 4.9.4 瓦片信息查看

**统计信息**

- 已加载瓦片数
- 总瓦片数
- 正在加载的瓦片数
- 内存使用量

**瓦片属性**

点击某个瓦片可查看：
- 瓦片 ID
- LOD 层级
- 几何误差
- 包围盒范围
- 父瓦片和子瓦片信息
- 内容类型（b3dm, pnts, i3dm 等）

#### 4.9.5 使用场景

**性能优化**

1. 调整屏幕空间误差阈值
2. 观察 FPS 变化
3. 平衡画质和性能

**理解 3D Tiles 结构**

1. 启用包围盒显示
2. 启用 LOD 着色
3. 观察瓦片的层级结构和空间划分

**调试加载问题**

1. 查看请求量
2. 检查是否有瓦片加载失败
3. 查看错误日志

---

### 4.10 CSV 数据导入

CSV 导入工具用于将 CSV 数据文件可视化到 Cesium 地球上。

**打开方式**: 点击工具栏的"CSV 导入"按钮

#### 4.10.1 导入流程

**1. 上传 CSV 文件**

方法一：拖拽上传
- 将 CSV 文件拖拽到上传区域
- 文件自动解析

方法二：点击选择
- 点击"选择文件"按钮
- 浏览并选择 CSV 文件

**2. 数据预览**

- 自动检测分隔符（逗号、分号、制表符）
- 显示前几行数据预览
- 显示列名和数据类型

**3. 字段映射**

将 CSV 列映射到地理信息字段：

- **经度列**: 选择包含经度数据的列（如 `longitude`, `lng`, `lon`）
- **纬度列**: 选择包含纬度数据的列（如 `latitude`, `lat`）
- **高度列**: （可选）选择高度数据列
- **名称列**: （可选）用于标注点的名称
- **数值列**: （可选）用于热力图或大小映射

应用会智能建议匹配的列（基于列名）。

**4. 选择可视化方式**

支持三种可视化方式：

**标记点 (Markers)**
- 在每个数据点位置创建标记
- 可自定义标记颜色和大小
- 可显示标签

**热力图 (Heatmap)**
- 基于数据密度生成热力图
- 可选择数值列控制热力强度
- 可自定义颜色梯度

**轨迹线 (Trajectory)**
- 将数据点连接成轨迹线
- 适合时序数据（需包含时间列）
- 可设置线条颜色和宽度

**5. 自定义样式**

根据选择的可视化方式，可调整：

- 颜色
- 大小/宽度
- 透明度
- 标签显示
- 其他样式选项

**6. 生成可视化**

- 点击"生成可视化"按钮
- 数据自动添加到地球上
- 相机自动飞到数据范围

#### 4.10.2 CSV 格式要求

**基本要求**

- 第一行必须是列名（表头）
- 至少包含经度和纬度列
- 经纬度必须是数值类型

**示例 CSV**

```csv
name,longitude,latitude,height,value
北京,116.397128,39.916527,0,100
上海,121.473701,31.230416,0,200
广州,113.264434,23.129162,0,150
深圳,114.057868,22.543099,0,180
```

**支持的分隔符**

- 逗号 (`,`)
- 分号 (`;`)
- 制表符 (`\t`)

#### 4.10.3 代码生成

生成可视化后，可以查看并复制生成的代码：

**标记点示例代码**

```javascript
// 从 CSV 生成的标记点代码
const data = [
  { name: '北京', lon: 116.397128, lat: 39.916527, value: 100 },
  { name: '上海', lon: 121.473701, lat: 31.230416, value: 200 },
  // ...
];

data.forEach(point => {
  viewer.entities.add({
    name: point.name,
    position: Cesium.Cartesian3.fromDegrees(point.lon, point.lat, 0),
    point: {
      pixelSize: 10,
      color: Cesium.Color.RED
    },
    label: {
      text: point.name,
      font: '14px sans-serif',
      verticalOrigin: Cesium.VerticalOrigin.BOTTOM,
      pixelOffset: new Cesium.Cartesian2(0, -10)
    }
  });
});
```

#### 4.10.4 使用场景

**地理数据可视化**

- 城市分布
- 门店位置
- 传感器网络
- 气象站点

**时序数据分析**

- 轨迹回放
- 历史数据展示
- 路径优化

**数据探索**

- 快速导入数据查看分布
- 验证数据正确性
- 发现数据模式

---

### 4.11 CZML 时间线编辑器

CZML 时间线编辑器用于创建和编辑 CZML 格式的时序数据。

**打开方式**: 点击工具栏的"CZML 编辑器"按钮

#### 4.11.1 CZML 简介

CZML（Cesium Language）是一种 JSON 格式，用于描述时序场景：
- 支持实体随时间变化的属性
- 支持动画和插值
- 支持复杂的时序场景

#### 4.11.2 功能概览

- 创建 CZML 文档
- 编辑时间范围
- 添加实体和属性
- 设置关键帧和插值
- 预览动画
- 导出 CZML 文件

#### 4.11.3 使用流程

**1. 创建 CZML 文档**

- 点击"新建 CZML"
- 设置文档基本信息：
  - 文档 ID
  - 文档名称
  - 时间范围（开始时间、结束时间）

**2. 添加实体**

- 点击"添加实体"
- 选择实体类型（Point, Model, Path 等）
- 设置实体 ID 和名称

**3. 编辑属性**

对每个实体可设置：
- 静态属性（固定值）
- 时序属性（随时间变化）

**4. 添加关键帧**

对时序属性：
- 添加关键帧（时间点 + 属性值）
- 选择插值方式：
  - LINEAR: 线性插值
  - HERMITE: 平滑插值
  - LAGRANGE: 拉格朗日插值

**5. 预览动画**

- 点击"播放"按钮
- 时间线滑块控制时间
- 观察实体属性变化

**6. 导出 CZML**

- 点击"导出 CZML"
- 保存为 `.czml` 文件

#### 4.11.4 示例 CZML

**简单的移动点**

```json
[
  {
    "id": "document",
    "name": "Moving Point",
    "version": "1.0",
    "clock": {
      "interval": "2025-01-15T00:00:00Z/2025-01-15T00:01:00Z",
      "currentTime": "2025-01-15T00:00:00Z",
      "multiplier": 10
    }
  },
  {
    "id": "point1",
    "name": "Moving Point",
    "position": {
      "epoch": "2025-01-15T00:00:00Z",
      "cartographicDegrees": [
        0, 116.0, 39.0, 0,
        30, 116.5, 39.5, 0,
        60, 117.0, 40.0, 0
      ]
    },
    "point": {
      "color": { "rgba": [255, 0, 0, 255] },
      "pixelSize": 10
    }
  }
]
```

#### 4.11.5 使用场景

**轨迹动画**

- 飞机飞行路径
- 车辆行驶轨迹
- 卫星轨道

**时序数据展示**

- 历史数据回放
- 灾害演变过程
- 城市发展变迁

---

### 4.12 Cesium API 浏览器

Cesium API 浏览器提供 Cesium API 的交互式文档和代码示例。

**打开方式**: 点击工具栏的"API 浏览器"按钮

#### 4.12.1 功能特性

- 按类别浏览 API
- 搜索类、方法、属性
- 查看方法签名和参数说明
- 查看返回值类型
- 查看代码示例
- 直接插入代码到编辑器

#### 4.12.2 API 分类

**Core（核心）**
- Viewer
- Scene
- Camera
- ScreenSpaceEventHandler
- ...

**Entities（实体）**
- Entity
- EntityCollection
- PointGraphics
- BillboardGraphics
- ...

**DataSources（数据源）**
- DataSource
- GeoJsonDataSource
- CzmlDataSource
- KmlDataSource
- ...

**Imagery（影像）**
- ImageryLayer
- ImageryProvider
- WebMapServiceImageryProvider
- ...

**Terrain（地形）**
- TerrainProvider
- CesiumTerrainProvider
- ...

**3D Tiles**
- Cesium3DTileset
- Cesium3DTile
- ...

#### 4.12.3 使用流程

**1. 浏览 API**

- 点击左侧类别
- 展开类列表
- 点击类名查看详情

**2. 查看类详情**

显示：
- 类的描述
- 构造函数签名
- 属性列表
- 方法列表
- 事件列表

**3. 查看方法详情**

显示：
- 方法签名
- 参数列表（名称、类型、是否必填、说明）
- 返回值类型
- 代码示例

**4. 搜索 API**

- 在搜索框输入关键词（如 "flyTo"）
- 实时过滤匹配的类和方法
- 点击结果跳转到详情

**5. 插入代码示例**

- 点击代码示例旁的"插入"按钮
- 代码自动添加到编辑器

#### 4.12.4 常用 API 快速查找

**创建实体**
- 搜索: `viewer.entities.add`

**相机操作**
- 搜索: `camera.flyTo`, `camera.lookAt`

**事件监听**
- 搜索: `ScreenSpaceEventHandler`

**加载数据**
- 搜索: `GeoJsonDataSource.load`, `Cesium3DTileset`

**影像图层**
- 搜索: `ImageryLayer`, `viewer.imageryLayers`

---

## 5. 快捷键参考

### 5.1 全局快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + S` | 保存当前代码 |
| `Ctrl + Enter` | 运行代码 |
| `Ctrl + /` | 注释/取消注释 |
| `Ctrl + F` | 在代码中查找 |
| `Ctrl + H` | 查找并替换 |
| `F11` | 全屏模式 |
| `ESC` | 退出全屏/取消操作 |

### 5.2 编辑器快捷键

| 快捷键 | 功能 |
|--------|------|
| `Ctrl + Z` | 撤销 |
| `Ctrl + Y` | 重做 |
| `Ctrl + A` | 全选 |
| `Ctrl + C` | 复制 |
| `Ctrl + V` | 粘贴 |
| `Ctrl + X` | 剪切 |
| `Tab` | 缩进 |
| `Shift + Tab` | 取消缩进 |
| `Ctrl + D` | 删除当前行 |
| `Ctrl + Shift + K` | 删除当前行 |
| `Alt + Up/Down` | 移动当前行 |

### 5.3 相机控制（地球视图）

| 操作 | 功能 |
|------|------|
| 左键拖拽 | 旋转地球 |
| 右键拖拽 | 倾斜视角 |
| 中键拖拽 | 平移 |
| 滚轮 | 缩放 |
| `Ctrl + 左键拖拽` | 平移 |
| 双击左键 | 缩放到点击位置 |

---

## 6. 常见问题

### Q1: 应用启动后地球加载失败，显示"无法连接到 Cesium Ion"

**原因**: Cesium Ion Token 无效或网络问题

**解决方法**:
1. 检查网络连接
2. 菜单栏 → 设置 → Cesium Token 配置
3. 输入有效的 Token（从 [Cesium Ion](https://ion.cesium.com/tokens) 获取）
4. 重启应用

### Q2: 代码运行后没有效果

**原因**: 可能的原因包括代码错误、权限问题、`viewer` 未定义

**解决方法**:
1. 检查控制台是否有错误消息
2. 确保代码中使用 `viewer` 变量（已全局定义）
3. 检查代码语法是否正确
4. 尝试运行简单的测试代码：
   ```javascript
   viewer.entities.add({
     position: Cesium.Cartesian3.fromDegrees(0, 0, 0),
     point: { pixelSize: 10, color: Cesium.Color.RED }
   });
   ```

### Q3: 性能监控显示 FPS 过低

**原因**: 场景中实体过多、渲染负载过高

**解决方法**:
1. 查看性能监控的优化建议
2. 使用场景管理器删除不需要的实体
3. 降低实体数量
4. 关闭不必要的调试可视化（如包围盒显示）
5. 降低屏幕空间误差阈值（对于 3D Tiles）

### Q4: 截图或录制 GIF 时画面模糊

**原因**: 分辨率设置过低或质量设置不当

**解决方法**:
1. 提高截图分辨率（使用自定义分辨率）
2. 使用 PNG 格式（无损）
3. GIF 录制时提高质量设置（15-20）
4. 确保地球视图已完全加载后再截图

### Q5: 导入的 CSV 数据位置不正确

**原因**: 字段映射错误或坐标系统不匹配

**解决方法**:
1. 检查经纬度列映射是否正确
2. 确认 CSV 中的经纬度是十进制度数（如 116.4，而非度分秒）
3. 检查经度范围（-180 到 180）和纬度范围（-90 到 90）
4. 查看数据预览，确认数值正确

### Q6: 3D Tiles 加载失败

**原因**: URL 错误、网络问题、CORS 限制

**解决方法**:
1. 检查 tileset.json 的 URL 是否正确
2. 尝试在浏览器中直接访问该 URL
3. 检查服务器是否支持 CORS
4. 如使用 Cesium Ion，确认 Asset ID 正确且有访问权限

### Q7: 代码片段丢失

**原因**: 浏览器缓存被清除

**解决方法**:
1. 定期导出代码片段库进行备份
2. 重要片段保存到外部文件
3. 考虑使用云存储同步片段库

### Q8: GIF 录制后无法下载

**原因**: `gif.js` 库未安装或浏览器权限限制

**解决方法**:
1. 确认应用是否显示"gif.js 未安装"提示
2. 如是开发版本，运行 `npm install gif.js`
3. 使用降级方案（保存为图片序列）
4. 检查浏览器下载权限

---

## 7. 技巧与最佳实践

### 7.1 学习技巧

**新手入门**

1. 按顺序完成"新手入门"类别的教程
2. 先理解基础概念（Viewer, Entity, Camera）
3. 多动手实践，修改示例代码观察效果
4. 善用参数调试器，直观理解参数作用

**进阶提升**

1. 学习 DataSource 管理大量数据
2. 掌握时序动画（CZML）
3. 理解 3D Tiles 的 LOD 机制
4. 学习性能优化技巧

### 7.2 开发技巧

**代码组织**

```javascript
// 推荐：使用注释分段
// ========== 初始化 ==========
const viewer = window.viewer;

// ========== 创建实体 ==========
const entity = viewer.entities.add({...});

// ========== 事件监听 ==========
viewer.screenSpaceEventHandler.setInputAction(...);

// ========== 清理 ==========
// viewer.entities.removeAll();
```

**善用代码片段**

- 将常用代码保存为片段
- 建立个人代码库
- 定期整理和优化片段

**性能优化**

```javascript
// 不推荐：创建大量 Entity
for (let i = 0; i < 10000; i++) {
  viewer.entities.add({...});
}

// 推荐：使用 DataSource 或 Primitive
const dataSource = new Cesium.CustomDataSource('myData');
for (let i = 0; i < 10000; i++) {
  dataSource.entities.add({...});
}
viewer.dataSources.add(dataSource);
```

**调试技巧**

```javascript
// 使用 console.log 调试
console.log('实体位置:', entity.position.getValue());

// 使用 try-catch 捕获错误
try {
  // 可能出错的代码
} catch (error) {
  console.error('错误:', error);
}

// 使用 debugger 断点
debugger; // 代码会在此处暂停
```

### 7.3 场景管理技巧

**图层组织**

```javascript
// 使用不同的 DataSource 组织不同类型的数据
const pointsLayer = new Cesium.CustomDataSource('points');
const polygonsLayer = new Cesium.CustomDataSource('polygons');

viewer.dataSources.add(pointsLayer);
viewer.dataSources.add(polygonsLayer);

// 可以单独控制每个图层的显示
pointsLayer.show = false;
```

**批量操作**

```javascript
// 批量修改实体属性
viewer.entities.values.forEach(entity => {
  if (entity.point) {
    entity.point.color = Cesium.Color.BLUE;
  }
});

// 批量删除特定类型的实体
const toRemove = viewer.entities.values.filter(e => e.billboard);
toRemove.forEach(e => viewer.entities.remove(e));
```

**场景快照**

定期导出场景快照：
1. 使用场景管理器导出 JSON
2. 保存重要的场景配置
3. 方便恢复和分享

### 7.4 数据可视化技巧

**选择合适的实体类型**

- **Point**: 离散的点数据（如城市、站点）
- **Billboard**: 需要显示图标的数据
- **Label**: 需要显示文字标签
- **Polygon**: 区域数据（如行政区划、建筑轮廓）
- **Polyline**: 线性数据（如道路、河流、轨迹）

**颜色编码**

```javascript
// 根据数值映射颜色
function getColorByValue(value, min, max) {
  const ratio = (value - min) / (max - min);
  return Cesium.Color.fromHsl(ratio * 0.7, 1.0, 0.5);
}

// 应用到实体
entity.point.color = getColorByValue(temperature, -20, 40);
```

**大小映射**

```javascript
// 根据数值调整大小
function getSizeByValue(value, min, max) {
  const ratio = (value - min) / (max - min);
  return 5 + ratio * 20; // 大小范围 5-25
}

entity.point.pixelSize = getSizeByValue(population, 1000, 10000000);
```

---

## 8. 故障排除

### 8.1 应用无法启动

**症状**: 双击应用图标后没有反应

**排查步骤**:
1. 检查是否有错误提示
2. 查看任务管理器中是否已有进程运行
3. 尝试以管理员权限运行
4. 重新安装应用
5. 检查系统日志（Windows 事件查看器）

### 8.2 地球视图黑屏

**症状**: 应用启动后右侧地球视图为黑色

**排查步骤**:
1. 打开浏览器控制台（菜单 → 窗口 → 切换开发者工具）
2. 查看是否有错误消息
3. 检查 Cesium Ion Token 是否有效
4. 检查网络连接
5. 尝试清除缓存（重启应用）

### 8.3 代码执行报错

**症状**: 运行代码后控制台显示错误

**常见错误及解决**:

**`viewer is not defined`**
- 原因: `viewer` 变量未初始化
- 解决: 等待地球加载完成后再运行代码

**`Cannot read property 'add' of undefined`**
- 原因: 访问了未定义的对象
- 解决: 检查对象是否存在，使用可选链 `?.`

**`Invalid coordinates`**
- 原因: 经纬度值超出范围
- 解决: 检查经度（-180 到 180）、纬度（-90 到 90）

**`Entity with this id already exists`**
- 原因: 重复的实体 ID
- 解决: 使用唯一 ID 或先删除已存在的实体

### 8.4 性能问题

**症状**: 应用卡顿、FPS 低

**排查步骤**:
1. 打开性能监控查看具体指标
2. 检查实体数量（场景管理器）
3. 删除不需要的实体
4. 关闭调试可视化选项
5. 降低 3D Tiles 的屏幕空间误差阈值
6. 检查是否有无限循环的代码

### 8.5 数据导入问题

**CSV 导入失败**

- 检查 CSV 格式是否正确（第一行为表头）
- 检查分隔符是否正确
- 检查经纬度列是否包含有效数值
- 尝试使用简化的测试数据

**3D Tiles 加载失败**

- 检查 URL 是否可访问
- 检查 CORS 设置
- 尝试使用 Cesium Ion 资源（Asset ID）
- 查看网络请求是否成功（开发者工具 → Network）

### 8.6 获取帮助

如果上述方法无法解决问题：

1. **查看官方文档**
   - Cesium 官方文档: https://cesium.com/docs/
   - Cesium 论坛: https://community.cesium.com/

2. **检查更新**
   - 菜单 → 帮助 → 检查更新
   - 更新到最新版本

3. **联系支持**
   - 邮箱: chinaliyunhua@gmail.com
   - GitHub: 提交 Issue

---

## 附录

### A. 键盘快捷键速查表

| 类别 | 快捷键 | 功能 |
|------|--------|------|
| 文件 | `Ctrl + S` | 保存 |
| 编辑 | `Ctrl + Z` | 撤销 |
| 编辑 | `Ctrl + Y` | 重做 |
| 编辑 | `Ctrl + C` | 复制 |
| 编辑 | `Ctrl + V` | 粘贴 |
| 编辑 | `Ctrl + X` | 剪切 |
| 编辑 | `Ctrl + A` | 全选 |
| 编辑 | `Ctrl + /` | 注释 |
| 查找 | `Ctrl + F` | 查找 |
| 查找 | `Ctrl + H` | 替换 |
| 代码 | `Ctrl + Enter` | 运行 |
| 代码 | `Tab` | 缩进 |
| 代码 | `Shift + Tab` | 取消缩进 |
| 视图 | `F11` | 全屏 |
| 视图 | `ESC` | 退出全屏 |

### B. Cesium 实体类型速查

| 类型 | 用途 | 主要属性 |
|------|------|---------|
| Point | 点标记 | pixelSize, color |
| Label | 文字标签 | text, font, fillColor |
| Billboard | 图标 | image, scale |
| Polyline | 折线 | positions, width, material |
| Polygon | 多边形 | hierarchy, material, height |
| Box | 立方体 | dimensions, material |
| Cylinder | 圆柱体 | length, topRadius, bottomRadius |
| Ellipse | 椭圆 | semiMajorAxis, semiMinorAxis |
| Rectangle | 矩形 | coordinates, material |
| Corridor | 走廊 | positions, width |
| Wall | 墙 | positions, maximumHeights |
| Model | 3D模型 | uri, scale |
| Path | 路径 | leadTime, trailTime, material |

### C. 常用坐标系转换公式

**经纬度 → 笛卡尔坐标**
```javascript
const cartesian = Cesium.Cartesian3.fromDegrees(lon, lat, height);
```

**笛卡尔坐标 → 经纬度**
```javascript
const cartographic = Cesium.Cartographic.fromCartesian(cartesian);
const lon = Cesium.Math.toDegrees(cartographic.longitude);
const lat = Cesium.Math.toDegrees(cartographic.latitude);
const height = cartographic.height;
```

**度 → 弧度**
```javascript
const radians = Cesium.Math.toRadians(degrees);
```

**弧度 → 度**
```javascript
const degrees = Cesium.Math.toDegrees(radians);
```

### D. 性能优化检查清单

- [ ] 实体数量是否合理（建议 < 1000）
- [ ] 是否使用了 DataSource 管理数据
- [ ] 是否关闭了不需要的调试可视化
- [ ] 3D Tiles 的屏幕空间误差是否合适
- [ ] 是否有内存泄漏（实体未正确删除）
- [ ] 是否有无限循环的代码
- [ ] 是否合并了几何体
- [ ] 是否使用了实例化渲染
- [ ] 图片资源是否过大
- [ ] 是否启用了不必要的特效（阴影、光照等）

---

**文档版本**: v1.0.0
**最后更新**: 2025-01-15
**作者**: shimuhuayunzi

如有任何问题或建议，欢迎联系：chinaliyunhua@gmail.com
